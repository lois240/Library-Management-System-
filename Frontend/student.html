<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Dashboard - Library Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    .hidden-section { display: none; }
  </style>
</head>
<body class="bg-gray-100 flex h-screen font-sans">

  <!-- Sidebar -->
  <aside class="w-64 bg-blue-900 text-white flex flex-col">
    <div class="p-6 text-2xl font-bold border-b border-blue-700 text-center">
       🎓 Student Panel
    </div>
    <nav class="flex-1 p-4 space-y-2">
      <button onclick="showSection('dashboard')" class="nav-btn"><i class="fa-solid fa-chart-line"></i> Dashboard</button>
      <button onclick="showSection('browse')" class="nav-btn"><i class="fa-solid fa-book"></i> Browse Books</button>
      <button onclick="showSection('mybooks')" class="nav-btn"><i class="fa-solid fa-right-left"></i> My Borrowed Books</button>
      <button onclick="showSection('history')" class="nav-btn"><i class="fa-solid fa-clock-rotate-left"></i> Borrowing History</button>
      <button onclick="showSection('reservations')" class="nav-btn"><i class="fa-solid fa-bookmark"></i> Reservations</button>
      <button onclick="showSection('profile')" class="nav-btn"><i class="fa-solid fa-user"></i> Profile</button>
    </nav>
    <div class="p-4 border-t border-blue-700">
      <button onclick="alert('Logging out...')" class="w-full flex items-center gap-3 p-2 rounded-lg hover:bg-blue-700 transition">
        <i class="fa-solid fa-right-from-bracket"></i> Logout
      </button>
    </div>
  </aside>

  <!-- Main content -->
  <div class="flex-1 flex flex-col">
    <!-- Top bar -->
    <header class="bg-white shadow p-4 flex items-center justify-between">
      <h1 class="text-xl font-bold text-blue-900">Welcome, Student 👋</h1>
      <div class="flex items-center gap-6">
        <button class="relative">
          <i class="fa-solid fa-bell text-blue-800 text-xl"></i>
          <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
        </button>
      </div>
    </header>

    <!-- Sections -->
    <main class="p-6 overflow-y-auto">
      <!-- Dashboard -->
      <section id="dashboard" class="section">
        <h1 class="text-2xl font-bold text-blue-900 mb-6">Dashboard Overview</h1>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="card">
            <i class="fa-solid fa-book text-3xl text-blue-700"></i>
            <div>
              <p class="text-gray-500">Books Available</p>
              <h2 id="statBooks" class="text-xl font-bold">0</h2>
            </div>
          </div>
          <div class="card">
            <i class="fa-solid fa-right-left text-3xl text-blue-700"></i>
            <div>
              <p class="text-gray-500">Books Borrowed</p>
              <h2 id="statBorrowed" class="text-xl font-bold">0</h2>
            </div>
          </div>
          <div class="card">
            <i class="fa-solid fa-triangle-exclamation text-3xl text-red-600"></i>
            <div>
              <p class="text-gray-500">Overdue</p>
              <h2 id="statOverdue" class="text-xl font-bold">0</h2>
            </div>
          </div>
        </div>
      </section>

      <!-- Browse Books -->
      <section id="browse" class="section hidden-section">
        <h1 class="text-2xl font-bold text-blue-900 mb-6">Browse Books</h1>
        <input type="text" placeholder="Search by title, author, ISBN..." class="w-full p-3 border rounded mb-4 focus:ring-2 focus:ring-blue-600">
        <div id="bookCatalog" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
      </section>

      <!-- My Borrowed Books -->
      <section id="mybooks" class="section hidden-section">
        <h1 class="text-2xl font-bold text-blue-900 mb-6">My Borrowed Books</h1>
        <table class="w-full bg-white shadow rounded-xl overflow-hidden">
          <thead class="bg-blue-100 text-blue-900">
            <tr>
              <th class="p-3 text-left">Title</th>
              <th class="p-3 text-left">Borrow Date</th>
              <th class="p-3 text-left">Due Date</th>
              <th class="p-3 text-left">Status</th>
              <th class="p-3 text-left">Action</th>
            </tr>
          </thead>
          <tbody id="borrowedBooksTable"></tbody>
        </table>
      </section>

      <!-- Borrowing History -->
      <section id="history" class="section hidden-section">
        <h1 class="text-2xl font-bold text-blue-900 mb-6">Borrowing History</h1>
        <table class="w-full bg-white shadow rounded-xl overflow-hidden">
          <thead class="bg-blue-100 text-blue-900">
            <tr>
              <th class="p-3 text-left">Title</th>
              <th class="p-3 text-left">Borrow Date</th>
              <th class="p-3 text-left">Return Date</th>
              <th class="p-3 text-left">Status</th>
            </tr>
          </thead>
          <tbody id="historyTable"></tbody>
        </table>
      </section>

      <!-- Reservations -->
      <section id="reservations" class="section hidden-section">
        <h1 class="text-2xl font-bold text-blue-900 mb-6">Reservations</h1>
        <form class="bg-white p-6 rounded-xl shadow space-y-4 w-full md:w-1/2">
          <input type="text" placeholder="Enter Book ID to Reserve" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-600">
          <button class="bg-blue-700 hover:bg-blue-800 text-white px-4 py-2 rounded-lg transition">Reserve</button>
        </form>
      </section>

      <!-- Profile -->
      <section id="profile" class="section hidden-section">
        <h1 class="text-2xl font-bold text-blue-900 mb-6">My Profile</h1>
        <form class="bg-white p-6 rounded-xl shadow space-y-4 w-full md:w-1/2">
          <input type="text" value="John Doe" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-600">
          <input type="email" value="johndoe@email.com" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-600">
          <input type="password" placeholder="New Password" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-600">
          <button class="bg-blue-700 hover:bg-blue-800 text-white px-4 py-2 rounded-lg transition">Update Profile</button>
        </form>
      </section>
    </main>
  </div>

  <script>
    // Sample Book Data
    const books = [
      { title: "Java Programming", author: "James Gosling", isbn: "12345" },
      { title: "Database Systems", author: "C.J. Date", isbn: "67890" },
      { title: "Networking Basics", author: "Andrew Tanenbaum", isbn: "54321" }
    ];

    let borrowedBooks = [];
    let history = [];
    const maxBorrowLimit = 3;

    // Borrow Book
    function borrowBook(book) {
      if (borrowedBooks.length >= maxBorrowLimit) {
        alert("⚠️ You can only borrow up to 3 books at a time.");
        return;
      }

      const borrowDate = new Date();
      const dueDate = new Date();
      dueDate.setDate(borrowDate.getDate() + 14);

      borrowedBooks.push({
        title: book.title,
        borrowDate: borrowDate.toISOString().split("T")[0],
        dueDate: dueDate.toISOString().split("T")[0],
        status: "Borrowed"
      });

      renderBorrowedBooks();
      updateStats();
      alert(`✅ You borrowed "${book.title}"`);
    }

    // Return Book
    function returnBook(index) {
      borrowedBooks[index].status = "Returned";
      borrowedBooks[index].returnDate = new Date().toISOString().split("T")[0];
      history.push(borrowedBooks[index]);
      borrowedBooks.splice(index, 1);
      renderBorrowedBooks();
      renderHistory();
      updateStats();
    }

    // Renew Book
    function renewBook(index) {
      let newDue = new Date(borrowedBooks[index].dueDate);
      newDue.setDate(newDue.getDate() + 7);
      borrowedBooks[index].dueDate = newDue.toISOString().split("T")[0];
      alert(`🔄 Book renewed until ${borrowedBooks[index].dueDate}`);
      renderBorrowedBooks();
    }

    // Render Borrowed Books
    function renderBorrowedBooks() {
      const table = document.getElementById("borrowedBooksTable");
      table.innerHTML = "";
      let today = new Date();
      borrowedBooks.forEach((b, index) => {
        let due = new Date(b.dueDate);
        let statusClass = "text-green-600";
        if (today > due && b.status === "Borrowed") {
          b.status = "Overdue";
          statusClass = "text-red-600";
        }
        table.innerHTML += `
          <tr class="hover:bg-gray-50">
            <td class="p-3">${b.title}</td>
            <td class="p-3">${b.borrowDate}</td>
            <td class="p-3">${b.dueDate}</td>
            <td class="p-3 ${statusClass}">${b.status}</td>
            <td class="p-3 flex gap-2">
              ${b.status === "Borrowed" || b.status === "Overdue" ? `
                <button onclick="returnBook(${index})" class="px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700">Return</button>
                <button onclick="renewBook(${index})" class="px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">Renew</button>
              ` : ""}
            </td>
          </tr>
        `;
      });
    }

    // Render History
    function renderHistory() {
      const table = document.getElementById("historyTable");
      table.innerHTML = "";
      history.forEach(h => {
        table.innerHTML += `
          <tr class="hover:bg-gray-50">
            <td class="p-3">${h.title}</td>
            <td class="p-3">${h.borrowDate}</td>
            <td class="p-3">${h.returnDate}</td>
            <td class="p-3">${h.status}</td>
          </tr>
        `;
      });
    }

    // Update Stats
    function updateStats() {
      document.getElementById("statBooks").innerText = books.length;
      document.getElementById("statBorrowed").innerText = borrowedBooks.length;
      let overdue = borrowedBooks.filter(b => b.status === "Overdue").length;
      document.getElementById("statOverdue").innerText = overdue;
    }

    // Load Catalog
    function loadCatalog() {
      const catalog = document.getElementById("bookCatalog");
      catalog.innerHTML = "";
      books.forEach(b => {
        let card = document.createElement("div");
        card.className = "bg-white p-4 rounded-xl shadow hover:shadow-lg transition";
        card.innerHTML = `
          <h2 class="font-bold text-lg text-blue-900">${b.title}</h2>
          <p class="text-gray-600">by ${b.author}</p>
          <p class="text-gray-500">ISBN: ${b.isbn}</p>
          <button onclick='borrowBook(${JSON.stringify(b)})' class="mt-2 bg-blue-700 hover:bg-blue-800 text-white px-3 py-1 rounded transition">Borrow</button>
        `;
        catalog.appendChild(card);
      });
    }

    // Section Switch
    function showSection(id) {
      document.querySelectorAll('.section').forEach(sec => sec.classList.add('hidden-section'));
      document.getElementById(id).classList.remove('hidden-section');
    }

    // Init
    loadCatalog();
    renderBorrowedBooks();
    renderHistory();
    updateStats();
    showSection('dashboard');
  </script>

  <style>
    .nav-btn {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem;
      border-radius: 0.5rem;
      transition: background 0.2s;
    }
    .nav-btn:hover { background-color: #1e3a8a; }
    .card {
      background: white;
      padding: 1.5rem;
      border-radius: 0.75rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      gap: 1rem;
    }
  </style>
</body>
</html>
